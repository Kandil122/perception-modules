<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Autonomous Car Perception: ZED2i Real-World Deployment Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Autonomous Car Perception<span id="projectnumber">&#160;v0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">ZED2i Real-World Deployment Guide</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md63"></a> This guide covers deploying the refactored modular obstacle detector on ZED2i camera with NVIDIA Jetson for real-world testing.</p>
<h1><a class="anchor" id="autotoc_md64"></a>
Prerequisites</h1>
<h2><a class="anchor" id="autotoc_md65"></a>
Hardware Requirements</h2>
<ul>
<li>ZED2i stereo camera</li>
<li>NVIDIA Jetson (Xavier NX, AGX Xavier, or similar)</li>
<li>ROS Noetic installed</li>
<li>ZED SDK installed</li>
</ul>
<h2><a class="anchor" id="autotoc_md66"></a>
Software Dependencies</h2>
<ul>
<li>ROS Noetic</li>
<li>PCL (Point Cloud Library)</li>
<li>ZED ROS Wrapper</li>
<li>TF2 (Transform library)</li>
<li>Visualization tools (RViz for debug)</li>
</ul>
<h1><a class="anchor" id="autotoc_md67"></a>
Installation Steps</h1>
<h2><a class="anchor" id="autotoc_md68"></a>
1. Build the Package</h2>
<div class="fragment"><div class="line">cd ~/roar/roar_ws</div>
<div class="line">catkin build zed_obstacle_detector</div>
<div class="line">source devel/setup.bash</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md69"></a>
2. Verify ZED2i Setup</h2>
<div class="fragment"><div class="line"># Check if ZED2i is detected</div>
<div class="line">lsusb | grep ZED</div>
<div class="line"> </div>
<div class="line"># Verify ZED ROS wrapper is working</div>
<div class="line">roslaunch zed_wrapper zed2i.launch</div>
<div class="line"># In another terminal:</div>
<div class="line">rostopic list | grep zed</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md70"></a>
Launch Options</h1>
<h2><a class="anchor" id="autotoc_md71"></a>
Generic Launch File (Recommended)</h2>
<div class="fragment"><div class="line"># ZED2i Production Mode</div>
<div class="line">roslaunch zed_obstacle_detector zed_camera_generic.launch camera_model:=zed2i performance_mode:=production</div>
<div class="line"> </div>
<div class="line"># ZED2i Debug Mode</div>
<div class="line">roslaunch zed_obstacle_detector zed_camera_generic.launch camera_model:=zed2i performance_mode:=debug</div>
<div class="line"> </div>
<div class="line"># ZED2i High Performance Mode</div>
<div class="line">roslaunch zed_obstacle_detector zed_camera_generic.launch camera_model:=zed2i performance_mode:=high_performance</div>
<div class="line"> </div>
<div class="line"># Other ZED Models</div>
<div class="line">roslaunch zed_obstacle_detector zed_camera_generic.launch camera_model:=zed2 performance_mode:=production</div>
<div class="line">roslaunch zed_obstacle_detector zed_camera_generic.launch camera_model:=zed_mini performance_mode:=debug</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md72"></a>
Performance Modes</h2>
<h3><a class="anchor" id="autotoc_md73"></a>
Debug Mode</h3>
<ul>
<li><b>Voxel Leaf Size</b>: 0.05m (fine resolution)</li>
<li><b>Debug Publishers</b>: Enabled</li>
<li><b>Detailed Timing</b>: Enabled</li>
<li><b>RViz</b>: Enabled</li>
<li><b>Early Exit</b>: Disabled</li>
<li><b>Best for</b>: Development, testing, debugging</li>
</ul>
<h3><a class="anchor" id="autotoc_md74"></a>
Production Mode</h3>
<ul>
<li><b>Voxel Leaf Size</b>: 0.08m (balanced)</li>
<li><b>Debug Publishers</b>: Disabled</li>
<li><b>Detailed Timing</b>: Disabled</li>
<li><b>RViz</b>: Disabled</li>
<li><b>Early Exit</b>: Enabled</li>
<li><b>Best for</b>: Real-world deployment, balanced performance</li>
</ul>
<h3><a class="anchor" id="autotoc_md75"></a>
High Performance Mode</h3>
<ul>
<li><b>Voxel Leaf Size</b>: 0.12m (coarse resolution)</li>
<li><b>Debug Publishers</b>: Disabled</li>
<li><b>Detailed Timing</b>: Disabled</li>
<li><b>RViz</b>: Disabled</li>
<li><b>Early Exit</b>: Enabled</li>
<li><b>Best for</b>: Resource-constrained systems, maximum performance</li>
</ul>
<h1><a class="anchor" id="autotoc_md76"></a>
Key Optimizations for Jetson</h1>
<h2><a class="anchor" id="autotoc_md77"></a>
Performance Settings</h2>
<ul>
<li><b>Voxel Leaf Size</b>: 0.08m (increased from 0.05m)</li>
<li><b>Early Exit</b>: Enabled for small/large point clouds</li>
<li><b>Debug Publishers</b>: Disabled in production</li>
<li><b>TF Timeout</b>: Reduced to 0.05s</li>
<li><b>Ground Filter Iterations</b>: Increased to 200</li>
</ul>
<h2><a class="anchor" id="autotoc_md78"></a>
Memory Management</h2>
<ul>
<li><b>Max Points</b>: 15,000 (reduced from 20,000)</li>
<li><b>TF Buffer Duration</b>: 5.0s (reduced from 10.0s)</li>
<li><b>Timing Reports</b>: Every 30s (reduced frequency)</li>
</ul>
<h1><a class="anchor" id="autotoc_md79"></a>
Topic Configuration</h1>
<h2><a class="anchor" id="autotoc_md80"></a>
Input Topics</h2>
<ul>
<li><b>Point Cloud</b>: <code>/zed2i/zed_node/point_cloud/cloud_registered</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md81"></a>
Output Topics</h2>
<ul>
<li><b>Obstacle Array</b>: <code>/zed_obstacle/obstacle_array</code></li>
<li><b>Visualization Markers</b>: <code>/zed_obstacle/markers</code></li>
<li><b>Debug Point Clouds</b> (debug mode only):<ul>
<li><code>/zed_obstacle/debug/filtered_transformed_pc</code></li>
<li><code>/zed_obstacle/debug/pc_no_ground</code></li>
<li><code>/zed_obstacle/debug/raw_clusters_rgb</code></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md82"></a>
Frame Configuration</h1>
<h2><a class="anchor" id="autotoc_md83"></a>
Required TF Frames</h2>
<ul>
<li><b>Source</b>: <code>zed2i_left_camera_frame</code> (or other ZED camera frame)</li>
<li><b>Target</b>: <code>base_link</code></li>
<li><b>World</b>: <code>world</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md84"></a>
Camera Frame Parameterization</h2>
<p>The camera frame is now fully parameterized and can be configured for different ZED models:</p>
<h3><a class="anchor" id="autotoc_md85"></a>
Supported Camera Models</h3>
<ul>
<li><b>ZED</b>: <code>zed_left_camera_frame</code></li>
<li><b>ZED2</b>: <code>zed2_left_camera_frame</code></li>
<li><b>ZED2i</b>: <code>zed2i_left_camera_frame</code></li>
<li><b>ZED Mini</b>: <code>zed_mini_left_camera_frame</code></li>
</ul>
<h3><a class="anchor" id="autotoc_md86"></a>
Custom Camera Frame</h3>
<div class="fragment"><div class="line"># Use custom camera frame</div>
<div class="line">roslaunch zed_obstacle_detector zed_camera_generic.launch camera_frame:=my_custom_camera_frame</div>
<div class="line"> </div>
<div class="line"># Override camera model with custom frame</div>
<div class="line">roslaunch zed_obstacle_detector zed_camera_generic.launch camera_model:=zed2i camera_frame:=zed2i_right_camera_frame</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md87"></a>
TF Tree Setup</h2>
<p>Ensure your robot's TF tree includes: </p><div class="fragment"><div class="line">world</div>
<div class="line">└── base_link</div>
<div class="line">    └── [camera_frame] (e.g., zed2i_left_camera_frame)</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md88"></a>
Parameter Tuning for Real-World</h1>
<h2><a class="anchor" id="autotoc_md89"></a>
Environment-Specific Adjustments</h2>
<h3><a class="anchor" id="autotoc_md90"></a>
Indoor Environments</h3>
<div class="fragment"><div class="line">voxel_leaf_size: 0.05</div>
<div class="line">cluster_tolerance: 0.2</div>
<div class="line">ground_filter_distance_threshold: 0.05</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md91"></a>
Outdoor Environments</h3>
<div class="fragment"><div class="line">voxel_leaf_size: 0.1</div>
<div class="line">cluster_tolerance: 0.4</div>
<div class="line">ground_filter_distance_threshold: 0.1</div>
<div class="line">ground_filter_angle_threshold_deg: 20.0</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md92"></a>
High-Performance Mode (Jetson)</h3>
<div class="fragment"><div class="line">voxel_leaf_size: 0.12</div>
<div class="line">enable_early_exit: true</div>
<div class="line">enable_debug_publishers: false</div>
<div class="line">enable_detailed_timing: false</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md93"></a>
Monitoring and Debugging</h1>
<h2><a class="anchor" id="autotoc_md94"></a>
Performance Monitoring</h2>
<ul>
<li>Check <code>/tmp/zed_obstacle_detector.log</code> for performance metrics</li>
<li>Monitor CPU and GPU usage on Jetson</li>
<li>Watch for TF timeout warnings</li>
</ul>
<h2><a class="anchor" id="autotoc_md95"></a>
Common Issues</h2>
<h3><a class="anchor" id="autotoc_md96"></a>
TF Errors</h3>
<div class="fragment"><div class="line">[ERROR] TF transform failed for new cluster</div>
</div><!-- fragment --><p> <b>Solution</b>: Verify TF tree is properly configured and published</p>
<h3><a class="anchor" id="autotoc_md97"></a>
Performance Issues</h3>
<div class="fragment"><div class="line">[WARN] Processing time too high</div>
</div><!-- fragment --><p> <b>Solution</b>: Increase voxel_leaf_size or enable early_exit</p>
<h3><a class="anchor" id="autotoc_md98"></a>
No Obstacles Detected</h3>
<div class="fragment"><div class="line">[INFO] No raw clusters found</div>
</div><!-- fragment --><p> <b>Solution</b>: Check point cloud topic, adjust clustering parameters</p>
<h2><a class="anchor" id="autotoc_md99"></a>
Debug Tools</h2>
<h3><a class="anchor" id="autotoc_md100"></a>
RViz Configuration</h3>
<p>Load the provided RViz config: </p><div class="fragment"><div class="line">rviz -d $(find zed_obstacle_detector)/config/zed_obstacle_detector.rviz</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md101"></a>
Topic Monitoring</h3>
<div class="fragment"><div class="line"># Monitor obstacle detections</div>
<div class="line">rostopic echo /zed_obstacle/obstacle_array</div>
<div class="line"> </div>
<div class="line"># Monitor point cloud processing</div>
<div class="line">rostopic echo /zed_obstacle/debug/filtered_transformed_pc</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md102"></a>
Testing Checklist</h1>
<h2><a class="anchor" id="autotoc_md103"></a>
Pre-Deployment</h2>
<ul>
<li>[ ] ZED2i camera detected and calibrated</li>
<li>[ ] TF tree properly configured</li>
<li>[ ] Point cloud topic publishing</li>
<li>[ ] Package builds successfully</li>
<li>[ ] Launch files work without errors</li>
</ul>
<h2><a class="anchor" id="autotoc_md104"></a>
Runtime Verification</h2>
<ul>
<li>[ ] Obstacle detection working</li>
<li>[ ] Performance within acceptable limits</li>
<li>[ ] No TF timeout errors</li>
<li>[ ] Memory usage stable</li>
<li>[ ] CPU usage reasonable</li>
</ul>
<h2><a class="anchor" id="autotoc_md105"></a>
Performance Targets</h2>
<ul>
<li><b>Processing Time</b>: &lt; 100ms per frame</li>
<li><b>Memory Usage</b>: &lt; 2GB</li>
<li><b>CPU Usage</b>: &lt; 80% on Jetson</li>
<li><b>Detection Range</b>: 0.2m - 7.0m</li>
</ul>
<h1><a class="anchor" id="autotoc_md106"></a>
Troubleshooting</h1>
<h2><a class="anchor" id="autotoc_md107"></a>
Build Issues</h2>
<div class="fragment"><div class="line"># Clean and rebuild</div>
<div class="line">catkin clean zed_obstacle_detector</div>
<div class="line">catkin build zed_obstacle_detector</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md108"></a>
Runtime Issues</h2>
<div class="fragment"><div class="line"># Check ROS master</div>
<div class="line">roscore</div>
<div class="line"> </div>
<div class="line"># Verify topics</div>
<div class="line">rostopic list | grep zed</div>
<div class="line"> </div>
<div class="line"># Check TF</div>
<div class="line">rosrun tf tf_echo zed2i_left_camera_frame base_link</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md109"></a>
Performance Issues</h2>
<ul>
<li>Reduce voxel_leaf_size if too coarse</li>
<li>Increase voxel_leaf_size if too slow</li>
<li>Enable early_exit for performance</li>
<li>Disable debug publishers in production</li>
</ul>
<h1><a class="anchor" id="autotoc_md110"></a>
Support</h1>
<p>For issues specific to the modular architecture:</p><ul>
<li>Check the performance logs in <code>/tmp/</code></li>
<li>Verify all modular components are initialized</li>
<li>Ensure parameter configuration is correct</li>
<li>Monitor individual component performance</li>
</ul>
<p>For ZED2i-specific issues:</p><ul>
<li>Refer to ZED SDK documentation</li>
<li>Check ZED ROS wrapper configuration</li>
<li>Verify camera calibration </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
